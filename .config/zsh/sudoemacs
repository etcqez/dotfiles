function e() {
    # 1. å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œç›´æ¥æ‰“å¼€ Emacs å®¢æˆ·ç«¯
    if [ $# -eq 0 ]; then
        TERM=xterm-emacs emacsclient -nw
        return
    fi

    # 2. è·å–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„
    # TRAMP å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„æ‰èƒ½æ­£å¸¸å·¥ä½œ
    # å¦‚æœç³»ç»Ÿæ²¡æœ‰ realpathï¼Œå¯ä»¥ç”¨: $(readlink -f "$1")
    local fullpath=$(realpath "$1")
    
    # 3. å®šä¹‰æ‰“å¼€é€»è¾‘
    # å˜é‡ use_sudo é»˜è®¤ä¸º false
    local use_sudo=0

    if [ -e "$fullpath" ]; then
        #æƒ…å†µAï¼šæ–‡ä»¶å­˜åœ¨
        if [ ! -w "$fullpath" ]; then
            # å¦‚æœæ–‡ä»¶å­˜åœ¨ä½†ä¸å¯å†™ï¼Œåˆ™éœ€è¦ sudo
            use_sudo=1
        fi
    else
        #æƒ…å†µBï¼šæ–‡ä»¶ä¸å­˜åœ¨ï¼ˆè¿™æ˜¯è¦æ–°å»ºæ–‡ä»¶ï¼‰
        local dirpath=$(dirname "$fullpath")
        if [ ! -w "$dirpath" ]; then
            # å¦‚æœæ‰€åœ¨ç›®å½•ä¸å¯å†™ï¼ˆä¾‹å¦‚åœ¨ /etc/ ä¸‹æ–°å»ºï¼‰ï¼Œåˆ™éœ€è¦ sudo
            use_sudo=1
        fi
    fi

    # 4. æ‰§è¡Œæ‰“å¼€å‘½ä»¤
    if [ $use_sudo -eq 1 ]; then
        echo "ğŸ”’ éœ€è¦ Root æƒé™ï¼Œæ­£åœ¨é€šè¿‡ TRAMP æ‰“å¼€..."
        # ä½¿ç”¨ /sudo:root@localhost: æ˜¯æœ€ç¨³å¦¥çš„æ ‡å‡†å†™æ³•
        TERM=xterm-emacs emacsclient -nw "/sudo:root@localhost:$fullpath"
    else
        # æ™®é€šæƒé™æ‰“å¼€
        TERM=xterm-emacs emacsclient -nw  "$fullpath"
    fi
}