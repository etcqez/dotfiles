function rm() {
    local force_delete=0
    local files=()
    local args=()

    # 1. å‚æ•°è§£æ
    for arg in "$@"; do
        case "$arg" in
            -*f*|--force)
                force_delete=1
                args+=("$arg")
                ;;
            -*)
                # å…¶ä»–å‚æ•°ï¼ˆå¦‚ -r, -vï¼‰åŸæ ·ä¿ç•™ï¼Œä¼ é€’ç»™ç³»ç»Ÿ rm
                args+=("$arg")
                ;;
            *)
                # è®°å½•æ–‡ä»¶åï¼Œç”¨äºåç»­æ‰“å°
                files+=("$arg")
                args+=("$arg")
                ;;
        esac
    done

    # 2. é€»è¾‘åˆ†æ”¯
    if [ $force_delete -eq 1 ]; then
        # ã€åˆ†æ”¯ Aï¼šå¼ºåˆ¶åˆ é™¤ã€‘
        
        # è°ƒç”¨ç³»ç»ŸåŸç”Ÿ rm
        command rm "${args[@]}"
        local ret=$?

        # åªæœ‰å½“ rm æ‰§è¡ŒæˆåŠŸ (è¿”å› 0) æ—¶æ‰æ‰“å°æç¤º
        # æ³¨æ„ï¼šrm -rf åˆ é™¤ä¸å­˜åœ¨çš„æ–‡ä»¶ä¹Ÿä¼šè¿”å› 0 (è¿™æ˜¯ -f çš„ç‰¹æ€§)ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿä¼šæç¤ºï¼Œç¬¦åˆé€»è¾‘
        if [ $ret -eq 0 ]; then
             # ä½¿ç”¨ ${files[*]} åªæ‰“å°æ–‡ä»¶åï¼Œä¸æ‰“å° -rf ç­‰å‚æ•°
            echo "ğŸ”¥ å·²æ°¸ä¹…åˆ é™¤: ${files[*]}"
        fi
        
        return $ret
    else
        # ã€åˆ†æ”¯ Bï¼šå®‰å…¨ç§»åŠ¨ã€‘
        
        # è¾¹ç•Œæ£€æŸ¥
        if [ ${#files[@]} -eq 0 ]; then
            echo "rm (safe mode): ç¼ºå°‘è¦å¤„ç†çš„æ–‡ä»¶"
            return 1
        fi

        # åˆ›å»ºä¸´æ—¶ç›®å½•
        local trash_dir
        trash_dir=$(mktemp -d /tmp/trash-$(date +%F_%H-%M-%S)_XXXXXX)
        
        # æ‰§è¡Œç§»åŠ¨
        # è¿™é‡Œåªç§»åŠ¨ files æ•°ç»„é‡Œçš„å†…å®¹ï¼ˆæ–‡ä»¶åï¼‰ï¼Œå¿½ç•¥ -r ç­‰å‚æ•°
        if mv -t "$trash_dir" "${files[@]}"; then
            echo "â™»ï¸  å·²å®‰å…¨ç§»åŠ¨åˆ°: $trash_dir"
            echo "   (ä½¿ç”¨ 'rm -rf ...' å¯æ°¸ä¹…åˆ é™¤)"
        else
            echo "âŒ ç§»åŠ¨å¤±è´¥"
            return 1
        fi
    fi
}